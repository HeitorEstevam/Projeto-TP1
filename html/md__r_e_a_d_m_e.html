<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sistema Hoteleiro: Projeto-TP1</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Sistema Hoteleiro
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__r_e_a_d_m_e.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Projeto-TP1 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<p>//Listagem de hoteis void Gerente::listarHoteis(){ std::cout &lt;&lt; "\nLista de Hoteis\n"; //Teste para lista vazia if (hoteis.empty()) { std::cout &lt;&lt; "Nenhum hotel cadastrado.\n"; return; }</p>
<p>for (size_t i = 0; i &lt; hoteis.size(); ++i) { const <a class="el" href="class_hotel.html">Hotel</a>&amp; h = hoteis[i]; std::cout &lt;&lt; h.getNome() &lt;&lt; "\n  Endereco: " &lt;&lt; h.getEndereco() &lt;&lt; "\n  Telefone: " &lt;&lt; h.getTelefone() &lt;&lt; "\n  Codigo:   " &lt;&lt; h.getCodigo() &lt;&lt; "\n"; } }</p>
<p>//Função auxiliar para achar o objeto hotel adequado Hotel* Gerente::buscarHotelPorCodigo(const std::string&amp; codigo){ for (<a class="el" href="class_hotel.html">Hotel</a>&amp; hotel : hoteis) { if (hotel.getCodigo() == codigo) { return &amp;hotel; } } return nullptr; // não encontrou }</p>
<p>//Edição de hotel void Gerente::editarHotel() { std::cout &lt;&lt; "\nEditar Hotel\n";</p>
<p>if (hoteis.empty()) { std::cout &lt;&lt; "Nenhum hotel cadastrado.\n"; return; }</p>
<p>listarHoteis();</p>
<p>Hotel* hotel = nullptr; std::string codigo;</p>
<p>//LOOP PARA ENCONTRAR O HOTEL while (true) { std::cout &lt;&lt; "\nInforme o código do hotel que deseja editar " "(ou pressione ENTER para cancelar): "; std::getline(std::cin &gt;&gt; std::ws, codigo);</p>
<p>if (codigo.empty()) { std::cout &lt;&lt; "Edição cancelada.\n"; return; }</p>
<p>hotel = buscarHotelPorCodigo(codigo);</p>
<p>if (hotel) break;</p>
<p>std::cerr &lt;&lt; "Código inválido. Nenhum hotel encontrado.\n"; }</p>
<p>//OBJETO TEMPORÁRIO PARA VALIDAÇÕES <a class="el" href="class_hotel.html">Hotel</a> hotelTemp;</p>
<p>std::string novoNome, novoEndereco, novoTelefone;</p>
<p>std::cout &lt;&lt; "\nEditando '" &lt;&lt; hotel-&gt;getNome() &lt;&lt; "'\n";</p>
<p>//NOME do { std::cout &lt;&lt; "Novo Nome (ou ENTER para manter): "; std::getline(std::cin &gt;&gt; std::ws, novoNome);</p>
<p>if (novoNome.empty()) break;</p>
<p>if (!hotelTemp.validarNome(novoNome)) { std::cerr &lt;&lt; "Nome inválido. Tente novamente.\n"; }</p>
<p>} while (!novoNome.empty() &amp;&amp; !hotelTemp.validarNome(novoNome));</p>
<p>if (!novoNome.empty()) hotel-&gt;setNome(novoNome);</p>
<p>//ENDEREÇO do { std::cout &lt;&lt; "Novo Endereço (ou ENTER para manter): "; std::getline(std::cin &gt;&gt; std::ws, novoEndereco);</p>
<p>if (novoEndereco.empty()) break;</p>
<p>if (!hotelTemp.validarEndereco(novoEndereco)) { std::cerr &lt;&lt; "Endereço inválido. Tente novamente.\n"; }</p>
<p>} while (!novoEndereco.empty() &amp;&amp; !hotelTemp.validarEndereco(novoEndereco));</p>
<p>if (!novoEndereco.empty()) hotel-&gt;setEndereco(novoEndereco);</p>
<p>//TELEFONE do { std::cout &lt;&lt; "Novo Telefone (ou ENTER para manter): "; std::getline(std::cin &gt;&gt; std::ws, novoTelefone);</p>
<p>if (novoTelefone.empty()) break;</p>
<p>if (!hotelTemp.validarTelefone(novoTelefone)) { std::cerr &lt;&lt; "Telefone inválido. Tente novamente.\n"; }</p>
<p>} while (!novoTelefone.empty() &amp;&amp; !hotelTemp.validarTelefone(novoTelefone));</p>
<p>if (!novoTelefone.empty()) hotel-&gt;setTelefone(novoTelefone);</p>
<p>std::cout &lt;&lt; "\nHotel atualizado com sucesso!\n"; }</p>
<p>//MÉTODOS AUXILIARES PARA EXCLUSÃO AUTOMATICA Quarto* Gerente::buscarQuartoPorCodigo(const std::string&amp; codigo) const { for (const <a class="el" href="class_hotel.html">Hotel</a>&amp; h : hoteis) { for (const <a class="el" href="class_quarto.html">Quarto</a>&amp; q : h.getQuartos()) { if (q.getCodigo() == codigo) { // retorna ponteiro modificável return const_cast&lt;Quarto*&gt;(&amp;q); } } } return nullptr; }</p>
<p>Reserva* Gerente::buscarReservaPorCodigo(const std::string&amp; codigo) const { for (const <a class="el" href="class_hotel.html">Hotel</a>&amp; h : hoteis) { for (const <a class="el" href="class_quarto.html">Quarto</a>&amp; q : h.getQuartos()) { for (const <a class="el" href="class_reserva.html">Reserva</a>&amp; r : q.getReservas()) { if (r.getCodigo() == codigo) { return const_cast&lt;Reserva*&gt;(&amp;r); } } } } return nullptr; }</p>
<p>//EXCLUIR HOTEL void Gerente::excluirHotel() { std::cout &lt;&lt; "\nExcluir Hotel\n";</p>
<p>if (hoteis.empty()) { std::cout &lt;&lt; "Nenhum hotel cadastrado.\n"; return; }</p>
<p>listarHoteis();</p>
<p>std::string codigo; std::cout &lt;&lt; "\nInforme o código do hotel a excluir: "; std::cin &gt;&gt; codigo;</p>
<p>// Busca simples Hotel* hotel = buscarHotelPorCodigo(codigo);</p>
<p>if (!hotel) { std::cerr &lt;&lt; "Código inválido. Nenhum hotel encontrado.\n"; return; }</p>
<p>// Antes de excluir, precisamos achar o índice size_t indice = 0; while (indice &lt; hoteis.size() &amp;&amp; hoteis[indice].getCodigo() != codigo) { indice++; }</p>
<p>// ====================== EXCLUSÃO EM CASCATA for (<a class="el" href="class_quarto.html">Quarto</a>&amp; q : hotel-&gt;getQuartos()) { </p><pre class="fragment">// excluir reservas do quarto
for (const Reserva&amp; r : q.getReservas()) {
    excluirReservaPorCodigo(this, r.getCodigo());
}

// excluir o próprio quarto
excluirQuartoPorCodigo(this, q.getCodigo());
</pre><p> }</p>
<p>hoteis.erase(hoteis.begin() + indice);</p>
<p>std::cout &lt;&lt; "Hotel excluído com sucesso!\n";</p>
<p>}</p>
<p>//QUARTOS //Listar os quartos de um hotel void Hotel::listarQuartos() const { if (quartos.empty()) { std::cout &lt;&lt; "Nenhum quarto cadastrado neste hotel.\n"; return; }</p>
<p>for (size_t i = 0; i &lt; quartos.size(); ++i) { //Acesso aos quartos const <a class="el" href="class_quarto.html">Quarto</a>&amp; q = quartos[i];</p>
<p>std::cout &lt;&lt; "Numero: " &lt;&lt; q.getNumero() &lt;&lt; "\nRamal: " &lt;&lt; q.getRamal() &lt;&lt; "\nCapacidade: " &lt;&lt; q.getCapacidade() &lt;&lt; "\nDiaria: R$ " &lt;&lt; q.getDiaria();</p>
<p>// Verifica se tem reserva if (q.getReserva() != nullptr) { std::cout &lt;&lt; "\nReservado"; } else { std::cout &lt;&lt; "\nLivre"; } std::cout &lt;&lt; "\n"; } }</p>
<p>//Listar todos os Quartos void Gerente::listarQuartos() { std::cout &lt;&lt; "\n--- LISTAGEM GERAL DE QUARTOS ---\n";</p>
<p>if (hoteis.empty()) { std::cout &lt;&lt; "Nenhum hotel cadastrado.\n"; return; }</p>
<p>// ITERADOR EXPLÍCITO for (std::vector&lt;Hotel&gt;::iterator it = hoteis.begin(); it != hoteis.end(); ++it) { it-&gt;listarQuartos(); } }</p>
<p>//Editar quarto void Gerente::editarQuarto() { std::cout &lt;&lt; "\nEditar Quarto\n";</p>
<p>if (hoteis.empty()) { std::cerr &lt;&lt; "Nenhum hotel cadastrado.\n"; return; }</p>
<p>listarHoteis();</p>
<p>// SELECIONAR HOTEL std::string codigoHotel; Hotel* hotel = nullptr;</p>
<p>while (true) { std::cout &lt;&lt; "\nInforme o código do hotel a que o quarto pertence (ou ENTER para cancelar): "; std::getline(std::cin &gt;&gt; std::ws, codigoHotel);</p>
<p>if (codigoHotel.empty()) { std::cout &lt;&lt; "Edição cancelada.\n"; return; }</p>
<p>hotel = buscarHotelPorCodigo(codigoHotel); if (hotel) break;</p>
<p>std::cerr &lt;&lt; "Código inválido. Tente novamente.\n"; }</p>
<p>// VERIFICAR SE HOTEL TEM QUARTOS if (hotel-&gt;getQuartos().empty()) { std::cerr &lt;&lt; "Este hotel não possui quartos cadastrados.\n"; return; }</p>
<p>// Exibir quartos hotel-&gt;listarQuartos();</p>
<p>// BUSCAR O QUARTO std::string numeroStr; Quarto* quarto = nullptr;</p>
<p>while (true) { std::cout &lt;&lt; "\nInforme o número do quarto a editar (ex.: 015): "; std::getline(std::cin &gt;&gt; std::ws, numeroStr);</p>
<p>// busca no vetor usando iterator for (std::vector&lt;Quarto&gt;::iterator it = hotel-&gt;getQuartos().begin(); it != hotel-&gt;getQuartos().end(); it++) { if (numeroStr == it-&gt;getNumero()) { quarto = &amp;(*it); break; } }</p>
<p>if (quarto) break;</p>
<p>std::cerr &lt;&lt; "Número de quarto não encontrado. Tente novamente.\n"; }</p>
<p>// OBJETO TEMPORÁRIO PARA VALIDAR <a class="el" href="class_quarto.html">Quarto</a> quartoTemp;</p>
<p>std::string novoRamal; int novaCapacidade = 0; int novaDiaria = 0;</p>
<p>std::cout &lt;&lt; "\nEditando Quarto de número " &lt;&lt; quarto-&gt;getNumero() &lt;&lt; "\n";</p>
<p>//EDITAR CAPACIDADE do { std::string capStr; std::cout &lt;&lt; "Nova Capacidade (ENTER para manter): "; std::getline(std::cin &gt;&gt; std::ws, capStr);</p>
<p>if (capStr.empty()) break;</p>
<p>if (!quartoTemp.validarCapacidade(novaCapacidade)) { std::cerr &lt;&lt; "Capacidade deve ser entre 1 e 4.\n"; continue; }</p>
<p>quarto-&gt;setCapacidade(novaCapacidade); break;</p>
<p>} while (true);</p>
<p>//EDITAR DIÁRIA do { std::cout &lt;&lt; "Nova Diária (ex.: 350.75 — ENTER para manter): ";</p>
<p>std::string diariaStr; std::getline(std::cin &gt;&gt; std::ws, diariaStr);</p>
<p>if (diariaStr.empty()) break;</p>
<p>novaDiaria = 0; bool ok = true; bool aposVirgula = false; int casas = 0;</p>
<p>for (char c : diariaStr) { if (c == '.' || c == ',') { aposVirgula = true; continue; } if (!isdigit(c)) { ok = false; break; } novaDiaria = novaDiaria * 10 + (c - '0'); if (aposVirgula) casas++; }</p>
<p>if (casas == 0) novaDiaria *= 100; else if (casas == 1) novaDiaria *= 10; else if (casas &gt; 2) ok = false;</p>
<p>if (!ok || !quartoTemp.validarDiaria(novaDiaria)) { std::cerr &lt;&lt; "Diária inválida. Deve estar entre 0,01 e 1.000.000,00.\n"; continue; }</p>
<p>quarto-&gt;setDiaria(novaDiaria); break;</p>
<p>} while (true);</p>
<p>//EDITAR RAMAL do { std::cout &lt;&lt; "Novo Ramal (00-50, ENTER para manter): "; std::getline(std::cin &gt;&gt; std::ws, novoRamal);</p>
<p>if (novoRamal.empty()) break;</p>
<p>if (!quartoTemp.validarRamal(novoRamal)) { std::cerr &lt;&lt; "Ramal deve estar entre 00 e 50.\n"; continue; }</p>
<p>quarto-&gt;setRamal(novoRamal); break;</p>
<p>} while (true);</p>
<p>std::cout &lt;&lt; "\nQuarto editado com sucesso!\n"; }</p>
<p>//Excluir <a class="el" href="class_quarto.html">Quarto</a> void Gerente::excluirQuarto() { std::cout &lt;&lt; "\n=== Excluir Quarto ===\n";</p>
<p>// Listar todos os quartos for (<a class="el" href="class_hotel.html">Hotel</a>&amp; h : hoteis) { for (<a class="el" href="class_quarto.html">Quarto</a>&amp; q : h.getQuartos()) { std::cout &lt;&lt; "Hotel: " &lt;&lt; h.getNome() &lt;&lt; " (Código: " &lt;&lt; h.getCodigo() &lt;&lt; ")" &lt;&lt; " | Quarto número: " &lt;&lt; q.getNumero() &lt;&lt; "\n"; } }</p>
<p>std::string codigoHotel; int numeroQuarto;</p>
<p>std::cout &lt;&lt; "\nInforme o código do hotel: "; std::cin &gt;&gt; codigoHotel; std::cout &lt;&lt; "Informe o número do quarto: "; std::cin &gt;&gt; numeroQuarto;</p>
<p>excluirQuartoInterno(this, codigoHotel, numeroQuarto);</p>
<p>std::cout &lt;&lt; "\nQuarto excluído com sucesso (incluindo reservas associadas).\n"; }</p>
<p>//Hóspedes //Listar hóspedes void Gerente::listarHospedes() { std::cout &lt;&lt; "\nLista de Hóspedes\n";</p>
<p>// Teste para lista vazia if (hospedes.empty()) { std::cout &lt;&lt; "Nenhum hóspede cadastrado.\n"; return; }</p>
<p>for (size_t i = 0; i &lt; hospedes.size(); ++i) { const <a class="el" href="class_hospede.html">Hospede</a>&amp; h = hospedes[i];</p>
<p>std::cout &lt;&lt; h.getNome() &lt;&lt; "\n  Email:    " &lt;&lt; h.getEmail() &lt;&lt; "\n  Endereco: " &lt;&lt; h.getEndereco() &lt;&lt; "\n  Cartão:   " &lt;&lt; h.getCartao() &lt;&lt; "\n"; } }</p>
<p>//Editar hóspede void Gerente::editarHospede() { std::cout &lt;&lt; "\nEditar Hospede\n";</p>
<p>// Confere se a lista esta vazia if (hospedes.empty()) { std::cerr &lt;&lt; "Nenhum hospede cadastrado.\n"; return; }</p>
<p>listarHospedes();</p>
<p>//Busca hospede pelo e-mail std::string emailAlvo; Hospede* hospede = nullptr;</p>
<p>while (true) { std::cout &lt;&lt; "\nInforme o email do hospede a editar (ou ENTER para cancelar): "; std::getline(std::cin &gt;&gt; std::ws, emailAlvo);</p>
<p>if (emailAlvo.empty()) { std::cout &lt;&lt; "Edição cancelada.\n"; return; }</p>
<p>// Busca no vetor usando iterator for (std::vector&lt;Hospede&gt;::iterator it = hospedes.begin(); it != hospedes.end(); ++it) { if (it-&gt;getEmail() == emailAlvo) { hospede = &amp;(*it); break; } }</p>
<p>if (hospede) break;</p>
<p>std::cerr &lt;&lt; "Email não encontrado. Tente novamente.\n"; }</p>
<p>std::cout &lt;&lt; "\nEditando dados de: " &lt;&lt; hospede-&gt;getNome() &lt;&lt; "\n";</p>
<p>//OBJETO TEMPORÁRIO PARA VALIDAR <a class="el" href="class_hospede.html">Hospede</a> hospedeTemp;</p>
<p>// Editar nome do { std::string novoNome; std::cout &lt;&lt; "Novo Nome [ENTER para manter]: "; std::getline(std::cin, novoNome);</p>
<p>if (novoNome.empty()) break;</p>
<p>if (!hospedeTemp.validarNome(novoNome)) { std::cerr &lt;&lt; "Nome inválido. Use apenas letras e inicie com maiúscula.\n"; continue; }</p>
<p>hospede-&gt;setNome(novoNome); break;</p>
<p>} while (true);</p>
<p>// Editar endereço do { std::string novoEndereco; std::cout &lt;&lt; "Novo Endereço [ENTER para manter]: "; std::getline(std::cin, novoEndereco);</p>
<p>if (novoEndereco.empty()) break;</p>
<p>if (!hospedeTemp.validarEndereco(novoEndereco)) { std::cerr &lt;&lt; "Endereço inválido.\n"; std::cerr &lt;&lt; "Regras: 5-30 chars, sem pontuação consecutiva ou no início/fim.\n"; continue; }</p>
<p>hospede-&gt;setEndereco(novoEndereco); break;</p>
<p>} while (true);</p>
<p>// Editar cartão do { std::string novoCartao; std::cout &lt;&lt; "Novo Cartão (ENTER para manter): "; std::getline(std::cin, novoCartao);</p>
<p>if (novoCartao.empty()) break;</p>
<p>if (!hospedeTemp.validarCartao(novoCartao)) { std::cerr &lt;&lt; "Cartão inválido (Verifique os 16 dígitos e o algoritmo de Luhn).\n"; continue; }</p>
<p>hospede-&gt;setCartao(novoCartao); break;</p>
<p>} while (true);</p>
<p>std::cout &lt;&lt; "\nHospede editado com sucesso!\n"; }</p>
<p>//Excluir hóspede void Gerente::excluirHospede(); </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
